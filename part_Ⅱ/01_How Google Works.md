## Google 如何工作

如果您对了解谷歌如何创建索引和数据库以及在处理查询时访问的文档不感兴趣，请跳过此描述。我从Chris Sherman和Gary Price在《The Invisible Web》（CyberAge Books，2001）第2章中精彩的“How Search Engines Work”概述中进行了调整。

谷歌运行在成千上万台低成本计算机组成的分布式网络上，因此可以进行快速并行处理。并行处理是一种计算方法，可以同时执行多个计算，从而显著加快数据处理速度。谷歌有三个不同的部分：

- Googlebot是一种网络爬虫，可以查找和获取网页。 
- 索引器会对每个页面上的每个单词进行排序，并将结果存储在一个巨大的数据库中。 
- 查询处理器会将您的搜索查询与索引进行比较，并推荐它认为最相关的文档。

让我们更仔细地看一下每个部分。



### 1.Googlebot，谷歌的网络爬虫

Googlebot是谷歌的网络爬虫机器人，它可以在网上查找和检索页面，并将其交给Google索引程序。很容易想象Googlebot就像一只小蜘蛛在网络空间中匆忙穿梭，但实际上Googlebot根本不会遍历整个互联网。它的工作方式类似于您的Web浏览器，通过向Web服务器发送请求获取网页、下载整个页面，然后将其交给Google的索引程序。

Googlebot由许多计算机组成，可以比您使用的Web浏览器更快地请求和获取页面。实际上，Googlebot可以同时请求数千个不同的页面。为了避免对Web服务器造成过大压力或挤出人类用户的请求，Googlebot故意使每个单独的Web服务器请求速度比其能够做到的慢一些。

Googlebot 有两种方式发现网页：一种是通过请求，如在“请求 Google 重新爬取您的 URL”中所述；另一种是通过爬行网络并查找链接。

 ![](./../images/part_Ⅱ/how google works/1.gif)

不幸的是，垃圾邮件发送者发现了如何创建自动机器人，向添加URL表单轰炸数百万个指向商业宣传的URL。谷歌会拒绝那些通过其Add URL表单提交的URL，因为它怀疑这些网站试图使用欺骗用户的策略，例如在页面上包含隐藏文本或链接、填充与主题无关的词语、伪装（也称为诱饵和转换）、使用隐蔽重定向、创建门户、域名或子域名并具有实质相似内容以及向Google发送自动查询，并链接到不良邻居。所以现在Add URL表单还有一个测试：它显示一些曲折字母来愚弄自动“字母猜测者”；它要求您输入您看到的字母——就像眼睛图表测试一样来阻止垃圾邮件机器人。

当Googlebot获取一个页面时，它会收集该页面上出现的所有链接，并将它们添加到队列中以进行后续爬取。由于大多数网页作者只链接到他们认为是高质量的页面，因此Googlebot很少遇到垃圾邮件。通过从每个遇到的页面收集链接，Googlebot可以快速建立一个覆盖广泛网络的链接列表。这种技术被称为深度爬行，也允许Googlebot深入探索单个站点内部。由于其规模巨大，深度爬行可以覆盖几乎整个网络上的每一页内容。但由于互联网非常庞大，所以这可能需要一些时间，因此有些页面可能仅在一个月内被抓取一次。

虽然Googlebot的功能很简单，但它必须被编程来处理几个挑战。首先，由于Googlebot同时发送数千个页面的请求，“即将访问”URL队列必须不断地进行检查，并与已经在Google索引中的URL进行比较。为了防止Googlebot再次获取相同的页面，必须消除队列中的重复项。 Googlebot必须确定重新访问页面的频率。一方面，重新索引未更改的页面是浪费资源；另一方面，谷歌希望重新索引已更改的页面以提供最新结果。

为了保持索引的最新状态，谷歌会不断地以与网页更新频率大致成正比的速度重新爬取受欢迎、经常变化的网页。这种爬取方式可以使索引保持最新，并被称为“新鲜爬取”。报纸页面每天都会下载，股票行情页面则更加频繁地下载。当然，“新鲜爬取”返回的页面数量要少于“深度爬取”。两种类型的爬虫结合使用，既能有效利用资源，又能使索引保持相对最新状态。



### 2.谷歌的索引器

Googlebot会将其发现的页面的完整文本提供给索引器。这些页面存储在Google的索引数据库中。该索引按搜索词按字母顺序排序，每个索引条目存储一个包含该词出现位置和文本内部位置列表的文档列表。此数据结构允许快速访问包含用户查询术语的文档。 

为了改善搜索性能，Google忽略（不进行索引）称为停用词（例如the、is、on、or、of、how、why以及某些单个数字和单个字母）的常见单词。停用词如此普遍，以至于它们对缩小搜索范围几乎没有作用，因此可以安全地丢弃它们。索引器还会忽略一些标点符号和多个空格，并将所有字母转换为小写，以提高Google的性能表现。



### 3.Google的查询处理器

查询处理器由多个部分组成，包括用户界面（搜索框），评估查询并将其与相关文档匹配的“引擎”，以及结果格式化程序。

PageRank是谷歌用于排名网页的系统。具有更高PageRank值的页面被认为更重要，更有可能在低PageRank值的页面之上列出。 

谷歌考虑了100多个因素来计算PageRank并确定哪些文档与查询最相关，包括页面的流行度、搜索词在页面内的位置和大小以及搜索词在页面上彼此之间的接近程度。专利申请讨论了Google评估网页时考虑到的其他因素。请访问SEOmoz.org报告以解释Google专利申请中包含概念和实际应用。 

谷歌还应用机器学习技术自动提高性能，通过学习存储数据中的关系和联想来实现。例如，拼写纠正系统使用这种技术来找出可能存在替代拼写方式。谷歌密切保护其用于计算相关性的公式；它们会进行微调以提高质量和性能，并击败最新恶意软件使用的狡猾技巧。 

索引全文网络使得谷歌可以超越简单匹配单个搜索词语。 谷歌优先考虑那些靠近且按查询顺序排列搜索词语 的网页 。 Google也可以匹配多个单词短语和句子. 由于谷歌不仅索引页面上的文本，还索引HTML代码，因此用户可以根据查询词语出现的位置限制搜索范围，例如在标题中，在URL中，在正文中以及链接到该页面的链接中。这些选项是由Google高级搜索表单和使用搜索运算符（高级运算符）提供的。 

让我们看看谷歌如何处理查询。

 ![](./../images/part_Ⅱ/how google works/2.png)

版权所有 © 2003 Google 公司。已获得许可使用。

有关 Google 工作原理的更多信息，请查看以下文章。

- 谷歌的技术页面，www.google.com/technology/。 
- 谷歌如何收集和排名结果？www.google.com/newsletter/librarian/librarian_2005_12/article1.html。 
- 谷歌的PageRank算法及其工作原理，www.iprcom.com/papers/pagerank/ 
- 解释了Google的PageRank并充分利用它，www.webworkshop.net/pagerank/



标签（关键词）：爬行，谷歌，页面排名，查询，结果，蜘蛛，停用词，技术，URL。